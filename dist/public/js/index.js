(()=>{"use strict";var e={333:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentManager=void 0,t.ComponentManager=class{constructor(e){this.components=new Map,this.name=e}addComponentToEntity(e){throw new Error(`function addComponentToEntity in ${this.name} should be overridden, and is not`)}setComponentProperties(e,t){if(console.log(this.components),this.components.has(e)){let n=this.components.get(e);for(const e in t){if(!n.hasOwnProperty(e)){if(n.hasOwnProperty("name"))throw new Error(`${n.name} does not have property ${e}`);throw new Error(`This component does not have a name nor a property ${e}`)}n[e]=t[e]}}console.log(this.components)}}},180:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0,t.Entity=class{constructor(e){this.id=e}addComponent(e){return e.addComponentToEntity(this.id)}setComponentProperties(e,t){e.setComponentProperties(this.id,t)}}},125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityManager=void 0;const o=n(180);t.EntityManager=class{constructor(){this.entities=new Map}createEntity(e){if(e||(e=crypto.randomUUID()),this.entities.has(e))throw new Error(`${this} already has an entity called ${e}`);return this.entities.set(e,new o.Entity(e)),this.entities.get(e)}}},533:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0,t.System=class{constructor(e,[...t]){this.entityManager=e,this.managersToQuery=new Map,t.forEach((e=>{this.managersToQuery.set(e.name,e)})),this.entities=new Set}populateEntitiesList(){let e=new Map,t=new Set;this.managersToQuery.forEach((t=>{let n=t.components.keys();for(const t of n)if(e.has(t)){let n=e.get(t);n++,e.set(t,n)}else e.set(t,1)}));for(const n of e)n[1]==this.managersToQuery.size&&t.add(n[0]);this.entities=t}refresh(){0==this.entities.size&&this.populateEntitiesList()}init(){}update(){}}},401:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PhysicsComponentManager=void 0;const o=n(333);class s extends o.ComponentManager{constructor(){super("PhysicsComponentManager"),this.components=new Map}addComponentToEntity(e){return this.components.set(e,{}),this.components.get(e)}}t.PhysicsComponentManager=s},114:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PositionComponentManager=void 0;const o=n(333),s={x:0,y:0};class r extends o.ComponentManager{constructor(){super("PositionComponentManager"),this.components=new Map}addComponentToEntity(e){return this.components.set(e,s),this.components.get(e)}}t.PositionComponentManager=r},235:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderableComponentManager=void 0;const o=n(333),s={element:document.createElement("meta"),name:"DefaultRenderableName"};class r extends o.ComponentManager{constructor(){super("RenderableComponentManager"),this.components=new Map}addComponentToEntity(e){return this.components.set(e,s),this.components.get(e)}}t.RenderableComponentManager=r},73:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VelocityComponentManager=void 0;const o=n(333),s={dx:0,dy:0};class r extends o.ComponentManager{constructor(){super("VelocityComponentManager"),this.components=new Map}addComponentToEntity(e){return this.components.set(e,s),this.components.get(e)}}t.VelocityComponentManager=r},898:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GravitySystem=void 0;const o=n(533);class s extends o.System{constructor(e,[...t]){super(e,t)}update(){this.refresh(),this.entities.forEach((e=>{this.managersToQuery.get("VelocityComponentManager").components.get(e).dy+=.1}))}}t.GravitySystem=s},830:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderSystem=void 0;const o=n(533);class s extends o.System{constructor(e,[...t]){super(e,t)}update(){this.refresh(),this.entities.forEach((e=>{let t=this.managersToQuery.get("RenderableComponentManager").components.get(e),n=this.managersToQuery.get("PositionComponentManager").components.get(e);t.element.style.top=n.y.toString()+"px"}))}}t.RenderSystem=s},428:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformSystem=void 0;const o=n(533);class s extends o.System{constructor(e,[...t]){super(e,t)}update(){this.refresh(),this.entities.forEach((e=>{let t=this.managersToQuery.get("PositionComponentManager"),n=this.managersToQuery.get("VelocityComponentManager"),o=t.components.get(e),s=n.components.get(e);o.y+=s.dy}))}}t.TransformSystem=s}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{const e=n(125),t=n(401),o=n(114),s=n(235),r=n(73),a=n(898),i=n(830),p=n(428),m=setInterval((()=>{"complete"==document.readyState&&(clearInterval(m),function(){const e=c.createEntity();e.addComponent(d),e.addComponent(y),e.addComponent(u),e.addComponent(l),e.setComponentProperties(l,{element:document.querySelector(".Player"),name:"Pudding",waffleMan:"Tim"}),C()}())}),20),c=new e.EntityManager,d=new o.PositionComponentManager,y=new t.PhysicsComponentManager,u=new r.VelocityComponentManager,l=new s.RenderableComponentManager,h=new a.GravitySystem(c,[d,y,u]),g=new p.TransformSystem(c,[d,u]),M=new i.RenderSystem(c,[d,l]);function C(){h.update(),g.update(),M.update(),requestAnimationFrame(C)}})()})();